<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>码韵智汇栈 - 用户注册</title>
    <link rel="shortcut icon" href="favicon.ico">
</head>
<body style="margin:0;min-height:100vh;background:linear-gradient(135deg,#667eea 0%,#764ba2 100%);display:flex;align-items:center;justify-content:center;font-family:Arial,sans-serif;">
    <div style="width:400px;background:#fff;border-radius:16px;box-shadow:0 20px 40px rgba(0,0,0,0.2);padding:35px;margin:20px;">
        <div style="text-align:center;margin-bottom:20px;">
            <img src="image/forum-logo01.png" alt="Logo" style="height:40px;">
        </div>
        <h2 style="text-align:center;color:#333;margin:0 0 8px 0;font-size:20px;">用户注册</h2>
        <p style="text-align:center;color:#888;font-size:13px;margin:0 0 25px 0;">创建您的账户，加入我们</p>
        
        <div style="margin-bottom:14px;">
            <label style="display:block;font-size:13px;font-weight:500;color:#333;margin-bottom:6px;">用户名 <span style="color:#e53935;">*</span></label>
            <input type="text" id="username" placeholder="请输入用户名" style="width:100%;padding:10px 14px;border:1px solid #ddd;border-radius:8px;font-size:14px;box-sizing:border-box;outline:none;">
            <div id="usernameErr" style="color:#e53935;font-size:12px;margin-top:4px;display:none;">用户名不能为空</div>
        </div>
        
        <div style="margin-bottom:14px;">
            <label style="display:block;font-size:13px;font-weight:500;color:#333;margin-bottom:6px;">昵称 <span style="color:#e53935;">*</span></label>
            <input type="text" id="nickname" placeholder="请输入昵称" style="width:100%;padding:10px 14px;border:1px solid #ddd;border-radius:8px;font-size:14px;box-sizing:border-box;outline:none;">
            <div id="nicknameErr" style="color:#e53935;font-size:12px;margin-top:4px;display:none;">昵称不能为空</div>
        </div>
        
        <div style="margin-bottom:14px;">
            <label style="display:block;font-size:13px;font-weight:500;color:#333;margin-bottom:6px;">密码 <span style="color:#e53935;">*</span></label>
            <input type="password" id="password" placeholder="请输入密码" style="width:100%;padding:10px 14px;border:1px solid #ddd;border-radius:8px;font-size:14px;box-sizing:border-box;outline:none;">
            <div id="passwordErr" style="color:#e53935;font-size:12px;margin-top:4px;display:none;">密码不能为空</div>
        </div>
        
        <div style="margin-bottom:14px;">
            <label style="display:block;font-size:13px;font-weight:500;color:#333;margin-bottom:6px;">确认密码 <span style="color:#e53935;">*</span></label>
            <input type="password" id="passwordRepeat" placeholder="再次输入密码" style="width:100%;padding:10px 14px;border:1px solid #ddd;border-radius:8px;font-size:14px;box-sizing:border-box;outline:none;">
            <div id="passwordRepeatErr" style="color:#e53935;font-size:12px;margin-top:4px;display:none;">两次密码不一致</div>
        </div>
        
        <div style="margin-bottom:18px;">
            <label style="display:flex;align-items:center;font-size:13px;color:#666;cursor:pointer;">
                <input type="checkbox" id="policy" style="margin-right:8px;width:16px;height:16px;">
                同意 <a href="#" style="color:#667eea;margin-left:4px;">使用条款和隐私政策</a>
            </label>
            <div id="policyErr" style="color:#e53935;font-size:12px;margin-top:4px;display:none;">请同意使用条款</div>
        </div>
        
        <button id="registerBtn" style="width:100%;padding:12px;background:linear-gradient(135deg,#667eea 0%,#764ba2 100%);color:#fff;border:none;border-radius:8px;font-size:15px;font-weight:600;cursor:pointer;">注 册</button>
        
        <div style="display:flex;align-items:center;margin:20px 0;color:#aaa;">
            <div style="flex:1;height:1px;background:#e0e0e0;"></div>
            <span style="padding:0 10px;font-size:12px;">或</span>
            <div style="flex:1;height:1px;background:#e0e0e0;"></div>
        </div>
        
        <a href="index.html" style="display:block;width:100%;padding:10px;background:#fff;color:#666;border:1px solid #ddd;border-radius:8px;font-size:14px;text-align:center;text-decoration:none;box-sizing:border-box;">游客模式浏览</a>
        
        <p style="text-align:center;margin-top:20px;font-size:13px;color:#888;">已有账户？<a href="sign-in.html" style="color:#667eea;text-decoration:none;">立即登录</a></p>
    </div>
    
    <script>
        function showErr(id, show) {
            document.getElementById(id).style.display = show ? 'block' : 'none';
        }
        
        document.getElementById('registerBtn').onclick = function() {
            var u = document.getElementById('username').value.trim();
            var n = document.getElementById('nickname').value.trim();
            var p = document.getElementById('password').value;
            var pr = document.getElementById('passwordRepeat').value;
            var pol = document.getElementById('policy').checked;
            var valid = true;
            
            showErr('usernameErr', !u); if (!u) valid = false;
            showErr('nicknameErr', !n); if (!n) valid = false;
            showErr('passwordErr', !p); if (!p) valid = false;
            showErr('passwordRepeatErr', !pr || p !== pr); if (!pr || p !== pr) valid = false;
            showErr('policyErr', !pol); if (!pol) valid = false;
            
            if (!valid) return;
            
            var xhr = new XMLHttpRequest();
            xhr.open('POST', 'user/register', true);
            xhr.setRequestHeader('Content-Type', 'application/x-www-form-urlencoded');
            xhr.onload = function() {
                if (xhr.status === 200) {
                    var res = JSON.parse(xhr.responseText);
                    if (res.code === 0) {
                        alert('注册成功，即将跳转到登录页面');
                        location.href = 'sign-in.html';
                    } else {
                        alert(res.message || '注册失败');
                    }
                } else {
                    alert('请求失败');
                }
            };
            xhr.send('username=' + encodeURIComponent(u) + '&nickname=' + encodeURIComponent(n) + '&password=' + encodeURIComponent(p) + '&passwordRepeat=' + encodeURIComponent(pr));
        };
    </script>
</body>
</html>